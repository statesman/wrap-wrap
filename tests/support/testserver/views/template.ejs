<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Test page for functional tests</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="http://test.wrap.hookem.com/css/styles.css" type="text/css" />
  <script>
    // Set the wrap object just like our apps do
    var wrap = {
      premium: <%- premium %>
    };
  </script>
</head>

<body>
  <script src="/wrap.js"></script>

  <div class="container">
    <div class="header clearfix">
      <nav>
        <ul class="nav nav-pills pull-right">
          <li role="presentation" class="active"><a href="#">Home</a></li>
          <li role="presentation"><a href="#">Login</a></li>
          <li role="presentation"><a href="#">Logout</a></li>
        </ul>
      </nav>
      <h3 class="text-muted">Test page for functional tests</h3>
    </div>

    <div class="jumbotron">
      <h1><%= type.charAt(0).toUpperCase() + type.slice(1) %> pageview #<%= count %></h1>
      <p class="lead">This page includes the <a href="/wrap.js" target="_blank">wrap</a> and <a href="/access-meter.js" target="_blank">access meter</a> code from the <code>dist/</code> folder in the project root with <code>wrap.premium</code> set to <code><%- premium %></code>.</p>
      <div class="btn-group btn-group-lg" role="group">
        <a class="btn btn-lg btn-success<% if(count <= 1) { %> disabled<% } %>" href="/<%= type %>/<%= (count - 1) %>/" role="button">Previous</a>
        <% if(premium) { %>
          <a class="btn btn-lg btn-success" href="/free/1/" role="button">Switch to free</a>
        <% } else { %>
          <a class="btn btn-lg btn-success" href="/premium/1/" role="button">Switch to premium</a>
        <% } %>
        <a class="btn btn-lg btn-success" href="/<%= type %>/<%= (count + 1) %>/" role="button">Next</a>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-sm-4">
        <h4><code>plate</code></h4>
        <pre id="debug-plate">checking ...</pre>
      </div>
      <div class="col-xs-12 col-sm-4">
        <h4><code>wrap</code></h4>
        <pre id="debug-wrap">checking ...</pre>
      </div>
      <div class="col-xs-12 col-sm-4">
        <h4><code>cmg.passage_quota.quota_params</code></h4>
        <pre id="debug-pq">checking ...</pre>
      </div>
    </div>

    <!-- Custom modals -->
    <div class="pq-modal-content pq-master-inherit" id="pq-passage-quota-block">
      <div class="pq-modal-screen"></div>
      <div class="pq-modal-wrap-container pq-modal-roadblock-container">
        <div class="pq-access-meter-modal pq-access-meter-modal-limit">
          <header class="pq-access-limit-header">
            <p>You have reached your limit of
              <span class="pq-passage-quota-max"></span>
              free premium articles this month.</p>
            <h2>
              Enjoy unlimited access to <a href="/">Hookem.com</a>.
            </h2>
            <h5>Starting at just 99¢ for 8 weeks.</h5>
          </header>
          <div class="pq-access-limit-body">
            <p class="pq-access-limit-hero-head">GREAT REASONS TO SUBSCRIBE TODAY!</p>
            <img class="pq-access-limit-hero" src="http://www.hookem.com/wp-content/themes/hookem/images/modal-preview.jpg">
            <ul class="pq-access-limit-reasons">
              <li>IN-DEPTH REPORTING</li>
              <li>ANALYSIS</li>
              <li>BEVO BEAT BLOG</li>
              <li>PHOTOS & VIDEOS</li>
            </ul>
          </div>
          <footer class="pq-access-limit-footer">
            <div class="pq-limit-footer-container">
              <p>Already a Paid Subscriber?</p>
              <a class="pq-access-meter-link cmOpenJanrainModal pq-modal-subscriber-link" href="#">I have a log-in for digital access</a>
              <a class="dss-match-em pq-access-meter-link" href="https://myaccount.statesman.com/dssMatch.aspx?premium=y&product=desktop&icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers&return=http://www.mystatesman.com?icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers_post-purchase">I need to create a log-in for digital access</a>
            </div>
            <a class="pq-access-meter-btn pq-passage-quota-view-offers" href="https://myaccount.statesman.com/dsssubscribe.aspx?premium=y&product=desktop&icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers&return=http://www.mystatesman.com?icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers_post-purchase">
          SUBSCRIBE
        </a>
          </footer>
        </div>
      </div>
    </div>

    <div class="pq-modal-sticky pq-master-inherit" id="pq-passage-quota-sticky">
      <div class="pq-access-meter-modal pq-access-meter-modal-count">
        <header class="pq-access-welcome-header">
          <img class="pq-access-welcome-logo" src="http://www.hookem.com/wp-content/themes/hookem/images/modal-logo.png">
          <a class="pq-access-meter-close pq-close-modal" href="#"><i class="fa fa-times"></i></a>
        </header>
        <div class="pq-access-body">
          <h1>You have read
            <span class="pq-passage-quota-count"></span>
            of
            <span class="pq-passage-quota-max"></span>
            free premium articles.</h1>
          <p>Digital subscriptions as low as 99¢. Subscribers get unlimited access to Hookem.com as well as award-winning news coverage and topic channels on entertainment, food, tech and politics on myStatesman.com.</p>
          <footer class="pq-access-footer">
            <a class="pq-access-meter-btn pq-passage-quota-view-offers" href="https://myaccount.statesman.com/dsssubscribe.aspx?premium=y&product=desktop&icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers&return=http://www.mystatesman.com?icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers_post-purchase">
          VIEW ALL OFFERS
        </a>
            <div>
              <p>Already a Paid Subscriber?</p>
              <a class="pq-access-meter-link cmOpenJanrainModal pq-modal-subscriber-link" href="#">I have a log-in for digital access</a>
              <a class="dss-match-em pq-access-meter-link" href="https://myaccount.statesman.com/dssMatch.aspx?premium=y&product=desktop&icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers&return=http://www.mystatesman.com?icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers_post-purchase">I need to create a log-in for digital access</a>
            </div>
          </footer>
        </div>
      </div>
    </div>

    <div class="pq-modal-content pq-master-inherit" id="pq-passage-quota-welcome">
      <div class="pq-modal-screen"></div>
      <div class="pq-modal-wrap-container pq-modal-welcome-container">
        <div class="pq-access-meter-modal pq-access-meter-modal-welcome">
          <header class="pq-access-welcome-header">
            <img class="pq-access-welcome-logo" src="http://www.hookem.com/wp-content/themes/hookem/images/modal-logo.png">
          </header>
          <div class="pq-access-body">
            <a class="pq-access-meter-close pq-close-modal" href="#"><i class="fa fa-times"></i></a>

            <h1>
              Welcome to Hookem.com
            </h1>

            <p>Subscribers have unlimited access to premier Longhorns coverage, 24/7, including in-depth reporting, analysis, live scoring, Bevo Beat blog, photos, videos and more.</p>
            <p>Non-subscribers can read
              <span class="pq-passage-quota-max"></span> premium articles and unlimited Bevo Beat blogs each month.</p>

            <footer class="pq-access-footer">
              <div class="pq-welcome-links">
                <p>Already a Paid Subscriber?</p>
                <a class="pq-access-meter-link cmOpenJanrainModal pq-modal-subscriber-link" href="#" id="pq-welcome-signin">I have a log-in for digital access</a>
                <a class="dss-match-em pq-access-meter-link" href="https://myaccount.statesman.com/dssMatch.aspx?premium=y&product=desktop&icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers&return=http://www.mystatesman.com?icid=statesman_internallink_mystatesmaninvitationbox_feb2014_viewoffers_post-purchase"
                id="pq-welcome-create-login">I need to create a log-in for digital access</a>
              </div>
              <a class="pq-access-meter-btn pq-close-modal" href="#" id="pq-welcome-continue">
            CONTINUE TO YOUR 1<sup>ST</sup>
            FREE ARTICLE
          </a>
            </footer>
          </div>
        </div>
      </div>
    </div>
    <!-- /Custom modals -->

    <script src="/access-meter.js"></script>

    <script>
    if(typeof cmg !== 'undefined' && typeof cmg.query !== 'undefined') {
      cmg.query(window).load(function() {
        var $plate = cmg.query('#debug-plate'),
            $wrap = cmg.query('#debug-wrap'),
            $pq = cmg.query('#debug-pq');

        if(typeof plate !== 'undefined') {
          $plate.text(JSON.stringify(plate));
        }
        else {
          $plate.text('Not found.')
        }

        if(typeof wrap !== 'undefined') {
          $wrap.text(JSON.stringify(wrap));
        }
        else {
          $wrap.text('Not found.')
        }

        if(typeof cmg.passage_quota.quota_params !== 'undefined') {
          $pq.text(JSON.stringify(cmg.passage_quota.quota_params));
        }
        else {
          $pq.text('Not found.')
        }
      });
    }
    </script>
</body>

</html>
